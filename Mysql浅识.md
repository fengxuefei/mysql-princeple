# 浅识Mysql

## 一.架构

客户端-服务器架构

## 二.启动Mysql服务器程序

Unix系统

```shell
#启动
mysql.server start
#停止
mysql.server stop
```

Windows系统

```cmd
#第一种方式：双击mysqld
#第二种方式：以服务的方式启动
#1.注册Windows服务
mysqld路径 install mysql
#2.启动mysql
net mysql start
#3.停止mysql
net mysql stop
```

## 三.启动Mysql客户端程序

```shell
#启动
mysql -h主机名 -u用户名 -p密码
#退出
quit
```

注意事项：

1. 最好不要在一行命令中输入密码：mysql -uroot -p123456
2. 如果非要在一行命令中输入密码，-p与密码值中间不能有空格，其他参数可以有
3. 各个参数没有硬性规定顺序
4. 如果客户端和服务器是同一台机器，可省略-h参数
5. 如果没有输入-u参数，默认使用当前登录操作系统的用户名

## 四.服务器处理客户端请求

 客户端进程向服务器进程发送一段文本（MySQL语句），服务器进程处理后再向客户端进程发送一段文本（处理结果） 。这个过程可分为三个部分： **连接管理 、 解析与优化 、 存储引擎** 。

****

### 1.连接管理

- 连接方式： TCP/IP 、 命名管道或共享内存 、 Unix域套接字 
- 连接管理：循环使用连接，限制连接数量

### 2.解析与优化

解析优化过程有几个重要部分：**查询缓存 、 语法解析 和 查询优化**

- #### 查询缓存

  缓存命中：查询请求在查询缓存中有一个一模一样的请求，即缓存命中，不同客户端之间可共享查询缓存

  缓存未命中：

  1.  如果两个查询请求在任何字符上的不同（例如：空格、注释、大小写），都会导致缓存不会命中。
  2.   如果查询请求中包含某些系统函数、用户自定义变量和函数、一些系统表，如 mysql 、information_schema、 performance_schema 数据库中的表，那这个请求就不会被缓存。 

  缓存失效： MySQL的缓存系统会监测涉及到的每张表，只要该表的结构或者数 据被修改，如对该表使用了 INSERT 、 UPDATE 、 DELETE 、 TRUNCATE TABLE 、 ALTER TABLE 、 DROP TABLE 或 DROP DATABASE 语句，那使用该表的所有高速缓存查询都将变为无效并从高速缓存中删除！ 

  利弊： 查询缓存有时可以提升系统性能，但也不得不因维护这块缓存而造成一些开销，比如每次都要去查询缓存中检索，查询请求处理完需要更新查询缓存，维护该查询缓存对应的内存区域。从MySQL 5.7.20 开始，不推荐使用查询缓存，并在MySQL 8.0中删除。 

